<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIBALEONE Metal Minting - Luca Urbani</title>
    <style>
        body {font-family: Arial, sans-serif; margin:0; background:#f9f5f0; color:#333; line-height:1.6;}
        header {background:#8B4513; color:white; padding:60px 20px; text-align:center;}
        nav {background:#A0522D; padding:15px; text-align:center; position:sticky; top:0; z-index:1000;}
        nav a {color:white; margin:0 20px; text-decoration:none; font-weight:bold; font-size:1.1em;}
        section {padding:60px 20px; text-align:center;}
        h1,h2,h3 {color:#8B4513;}

        .gallery {display:flex; flex-wrap:wrap; gap:22px; justify-content:center; padding:20px;}
        .photo-wrapper {position:relative; width:310px; cursor:zoom-in;}
        .gallery img {width:100%; height:auto; border:5px solid #8B4513; border-radius:12px; transition:transform .2s;}
        .gallery img:hover {transform:scale(1.04);}
        .caption {
            position:absolute; top:0; left:0; width:100%;
            background:rgba(0,0,0,0.78); color:white; padding:12px 8px;
            font-weight:bold; font-size:0.95em; text-align:center;
            border-top-left-radius:10px; border-top-right-radius:10px;
        }

        .featured {display:flex; flex-wrap:wrap; gap:40px; justify-content:center; margin-top:50px;}
        .featured .photo-wrapper {
            width:300px; height:300px; border-radius:50%; overflow:hidden; cursor:zoom-in;
            border:8px solid #8B4513; box-shadow:0 10px 30px rgba(0,0,0,0.3);
        }
        .featured img {width:100%; height:100%; object-fit:cover;}

        .contact-container {display:flex; align-items:center; justify-content:center; gap:50px; flex-wrap:wrap; max-width:1000px; margin:0 auto;}
        .contact-photo {width:240px; height:240px; border-radius:50%; object-fit:cover; border:7px solid #8B4513; box-shadow:0 8px 25px rgba(0,0,0,0.4);}
        .email {font-size:1.6em; font-weight:bold; color:#8B4513;}

        /* ====================== LIGHTBOX ====================== */
        #lightbox {
            display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%;
            background:rgba(0,0,0,0.98); text-align:center; overflow:hidden;
            cursor: grab;
        }
        #lightbox:active {cursor: grabbing;}

        #lightbox .img-container {
            position:absolute;
            top:50%; left:50%;
            transform:translate(-50%,-50%);
            user-select:none;
        }
        #lightbox-img {
            max-width:95vw; 
            max-height:95vh;
            border:7px solid #8B4513;
            border-radius:14px;
            box-shadow:0 0 40px rgba(0,0,0,0.9);
            transition:none; /* smooth dragging */
        }
        .close-btn {position:fixed; top:15px; right:30px; color:white; font-size:70px; font-weight:bold; cursor:pointer; z-index:10000;}
        .nav-arrow {
            position:fixed; top:50%; transform:translateY(-50%); color:white; font-size:80px;
            cursor:pointer; user-select:none; z-index:10000; opacity:0.7;
        }
        .nav-arrow:hover {opacity:1;}
        .prev-arrow {left:20px;}
        .next-arrow {right:20px;}

        /* Caption completely hidden in fullscreen */
        .lightbox-caption {display:none !important;}

        footer {background:#8B4513; color:white; padding:30px; text-align:center;}
    </style>
</head>
<body>
<!-- (all your HTML stays exactly the same until the lightbox div) -->

    <!-- Lightbox -->
    <div id="lightbox">
        <span class="close-btn">×</span>
        <span class="nav-arrow prev-arrow">←</span>
        <span class="nav-arrow next-arrow">→</span>
        <div class="img-container">
            <img id="lightbox-img" src="" alt="">
            <!-- caption removed from DOM or just hidden via CSS -->
        </div>
    </div>

<!-- (rest of your HTML unchanged) -->

<script>
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightbox-img');
    const prevBtn = document.querySelector('.prev-arrow');
    const nextBtn = document.querySelector('.next-arrow');

    let allPhotos = [...document.querySelectorAll('.photo-wrapper')];
    let currentIndex = 0;

    // Dragging & zoom variables
    let scale = 1;
    let posX = 0, posY = 0;
    let startX = 0, startY = 0;
    let isDragging = false;

    function updateTransform() {
        lbImg.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
    }

    function openLightbox(index) {
        currentIndex = index;
        const wrapper = allPhotos[index];
        const img = wrapper.querySelector('img');
        lbImg.src = img.src;

        // reset everything
        scale = 1;
        posX = posY = 0;
        updateTransform();

        lightbox.style.display = 'block';
    }

    function closeLightbox() { lightbox.style.display = 'none'; }
    function showPrev() { currentIndex = (currentIndex - 1 + allPhotos.length) % allPhotos.length; openLightbox(currentIndex); }
    function showNext() { currentIndex = (currentIndex + 1) % allPhotos.length; openLightbox(currentIndex); }

    // Open gallery images
    allPhotos.forEach((wrapper, i) => wrapper.addEventListener('click', () => openLightbox(i)));

    // Close
    lightbox.addEventListener('click', e => {
        if (e.target === lightbox || e.target.classList.contains('close-btn')) closeLightbox();
    });
    document.addEventListener('keydown', e => {
        if (lightbox.style.display !== 'block') return;
        if (e.key === 'Escape') closeLightbox();
        if (e.key === 'ArrowLeft') showPrev();
        if (e.key === 'ArrowRight') showNext();
    });

    prevBtn.addEventListener('click', showPrev);
    nextBtn.addEventListener('click', showNext);

    // ====================== MOUSE WHEEL ZOOM ======================
    lightbox.addEventListener('wheel', e => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? 0.9 : 1.1;
        scale = Math.max(0.5, Math.min(scale * delta, 8));
        updateTransform();
    });

    // ====================== MOUSE DRAG TO PAN ======================
    lbImg.addEventListener('mousedown', e => {
        if (scale === 1) return;
        e.preventDefault();
        isDragging = true;
        startX = e.clientX - posX;
        startY = e.clientY - posY;
        lightbox.style.cursor = 'grabbing';
    });

    document.addEventListener('mousemove', e => {
        if (!isDragging) return;
        e.preventDefault();
        posX = e.clientX - startX;
        posY = e.clientY - startY;
        updateTransform();
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
        lightbox.style.cursor = 'grab';
    });

    // ====================== TOUCH SUPPORT (pinch + drag) ======================
    let startDist = 0, startScale = 1;

    lightbox.addEventListener('touchstart', e => {
        if (e.touches.length === 2) {
            e.preventDefault();
            startDist = Math.hypot(
                e.touches[0].pageX - e.touches[1].pageX,
                e.touches[0].pageY - e.touches[1].pageY
            );
            startScale = scale;
        } else if (e.touches.length === 1 && scale > 1) {
            e.preventDefault();
            startX = e.touches[0].pageX - posX;
            startY = e.touches[0].pageY - posY;
        }
    });

    lightbox.addEventListener('touchmove', e => {
        if (e.touches.length === 2) {
            e.preventDefault();
            const currDist = Math.hypot(
                e.touches[0].pageX - e.touches[1].pageX,
                e.touches[0].pageY - e.touches[1].pageY
            );
            scale = startScale * (currDist / startDist);
            scale = Math.max(0.5, Math.min(scale, 8));
            updateTransform();
        } else if (e.touches.length === 1 && scale > 1) {
            e.preventDefault();
            posX = e.touches[0].pageX - startX;
            posY = e.touches[0].pageY - startY;
            updateTransform();
        }
    });
</script>
</body>
</html>